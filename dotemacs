;;Time-stamp: <2011-06-16 16:06:21 Shihpin Tseng>
;; $Id$

;; First, avoid the evil:
(when (featurep 'xemacs)
  (error "This .emacs file (probably) does not work with XEmacs."))


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; what kind of system are we using?  start with these, as it will influence
;; other stuff inspired by: http://www.xsteve.at/prg/emacs/.emacs.txt
(defconst win32-p (eq system-type 'windows-nt)
  "Are we running on a WinTel system?")
(defconst linux-p (or (eq system-type 'gnu/linux) (eq system-type 'linux))
  "Are we running on a GNU/Linux system?")
(defconst mac-p (eq system-type 'darwin) "Are we running on Macintosh system?")
(defconst console-p (eq (symbol-value 'window-system) nil)
  "Are we running in a console (non-X) environment?")


(setq emacs-load-start-time (current-time))
(setq debug-on-error t)                 ;will be cleared at end of buffer
;; (setq stack-trace-on-error t)

;; I use the Common Lisp stuff all the time
(require 'cl)

;; Load init-settings-path
(add-to-list 'load-path "~/.emacs.d/packages")
(if (fboundp 'normal-top-level-add-subdirs-to-load-path)
    (let* ((default-directory (expand-file-name "~/.emacs.d/packages/")))
      (normal-top-level-add-subdirs-to-load-path)))
;; If you only want some of the subdirectories added you can use
;; (normal-top-level-add-to-load-path '("emms" "erc" "planner" "w3"))
;; (mapc 'load (directory-files "~/.emacs.d/site-lisp" t "\.el$"))

(load "~/.emacs.d/site-lisp/00site-start.el")

;; A fun startup message, somewhat reminiscent of "The Matrix: Reloaded"
(defconst animate-n-steps 3)
(defun emacs-reloaded ()
  (animate-string (concat ";; Initialization successful, welcome to "
                          (substring (emacs-version) 0 16) ".") 0 0)
  (newline-and-indent) (newline-and-indent))

(add-hook 'after-init-hook 'emacs-reloaded)

(setq debug-on-error nil)                 ; was set t at top of buffer
;; (setq stack-trace-on-error nil)

(when (require 'time-date nil t)
  (message "Emacs startup time: %d seconds." (time-to-seconds (time-since emacs-load-start-time))))

;;; init end there ----------------------------------------------------------------


;; Tips
;; If you want to require lots of module you do like this
;; (dolist (module '(module1
;;                   module2
;;                   module3))
;;   (require module))


;; boot sequence
;; site-start.el --> .emacs --> default.el and terminal type file.
(custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(el-get-standard-packages (quote ("el-get" "cssh" "emacs-w3m" "switch-window" "vkill" "xcscope" "yasnippet" "package" "magit" "dired+" "bbdb" "auto-complete" "ecb" "cedet" "etags-select" "emacs-xcode-document-viewer" "ac-company"))))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 )
